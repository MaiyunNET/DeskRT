/*
 * DeskRT 0.0.1
 * Author: HanGuoShuai
 * Github: https://github.com/MaiyunNET/DeskRT
 */
"use strict";var DeskRT;!function(e){var t=function(){function e(){}return e.init=function(t,n){var a=this;void 0===n&&(n=function(){}),this._pre=t.pre||"",this._end=t.end||"",this._frame=t.frame||"",this._main=t.main||"",this._logo=t.logo||void 0,this.let=t.let||{},document.addEventListener("DOMContentLoaded",function(){var t=document.getElementsByTagName("body")[0];t.innerHTML='<div id="el-pop"><div id="el-mask"><div class="el-spin el-spin-spinning"><span class="el-spin-dot"><i></i><i></i><i></i><i></i></span></div></div></div>',a.__popDiv=document.getElementById("el-pop");var n=function(){var e=window.location.hash;""!==e&&(e=e.substr(1)),""!==e&&a.open(e)};window.addEventListener("hashchange",n),a.libs(["https://cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js","https://cdn.jsdelivr.net/npm/vuex@3/dist/vuex.min.js","https://cdn.jsdelivr.net/npm/element-ui@2/lib/index.js","https://cdn.jsdelivr.net/npm/element-ui@2/lib/theme-chalk/index.css","https://cdn.jsdelivr.net/npm/systemjs@0/dist/system.js"],function(){SystemJS.config({packages:{"http:":{defaultExtension:"js?"+a._end},"https:":{defaultExtension:"js?"+a._end}}}),a.__vuex=new Vuex.Store({state:{path:""},mutations:{set:function(e,t){e[t[0]]=t[1]}}}),l.init(),i.show();var s=!0;fetch(a._pre+a._frame+".html?"+a._end).then(function(e){return 404===e.status&&(alert('Error: "'+a._pre+a._frame+'.html" not found.'),s=!1),e.text()}).then(function(l){if(s){var o=function(s){i.hide(),l=a.purifyText(l);var o=l.match(/<el-menu(.+?)<\/el-menu><el-header>(.+?)<\/el-header>/);if(o.length>0){t.insertAdjacentHTML("afterbegin",'<div id="el-frame"><el-container><el-aside width="200px"><el-logo'+(a._logo?' style="background-image: url('+a._logo+');"':"")+'></el-logo><el-menu @select="elSelect" :default-active="DeskRT.Core.__vuex.state.path"'+o[1]+"</el-menu></el-aside><el-container><el-header>"+o[2]+'</el-header><el-main id="el-main"></el-main></el-container></el-container></div>');var c=function(e){window.location.hash="#"+e};if(void 0!==s){var d=s.methods||{};d.elSelect=c,e.__frameVm=new Vue({el:"#el-frame",data:s.data,methods:d,computed:s.computed})}else e.__frameVm=new Vue({el:"#el-frame",methods:{elSelect:c}});""===window.location.hash?window.location.hash="#"+a._main:n()}else alert("Error: <el-menu> and <el-header> not found.")};SystemJS.import(a._pre+a._frame).then(function(e){o(e)}).catch(function(){o()})}})})})},e.open=function(t){var n=this,l=t.indexOf("?"),a={};if(-1!==l){var s=t.slice(l+1).split("&");t=t.slice(0,l);for(var o=0;o<s.length;++o){var c=s[o].split("=");a[c[0]]=decodeURIComponent(c[1])}}this.__vuex.commit("set",["path",t]);var d=document.getElementById("el-main");if(this.__pages[t])this.__pages[t].elQuery=a,this.__pages[t].elOpen&&this.__pages[t].elOpen();else{i.show();var r=!0;fetch(this._pre+t+".html?"+this._end).then(function(e){return 404===e.status&&(r=!1),e.text()}).then(function(l){if(r){l=l.slice(9,-10);var s=document.createElement("div");if(s.setAttribute(":class","['el-page', {'el--show': elPageShow}]"),-1!==l.indexOf("<pre>")){l=l.replace(/([\s\S]+?)<pre>([\s\S]+?)<\/pre>([\s\S]*?)/g,function(e,t,i,l){return n.purifyText(t)+"<pre>"+i+"</pre>"});var o=l.lastIndexOf("</pre>");l=l.slice(0,o)+n.purifyText(l.slice(o)),s.innerHTML=l}else s.innerHTML=n.purifyText(l);var c=function(l){i.hide(),d.appendChild(s);var o;o=void 0!==l?{el:s,data:l.data,methods:l.methods,computed:l.computed}:{el:s},o.computed||(o.computed={}),o.data||(o.data={}),o.data.elPagePath=t,o.data.elQuery=a,o.computed.elPageShow=function(){return this.elPagePath===e.__vuex.state.path},o.computed.elMobile=function(){return this.elMobile===e.__vuex.state.mobile};var c=new Vue(o);n.__pages[t]=c;var r=!0;void 0!==c.elReady&&(r=c.elReady()),c.elOpen&&!1!==r&&c.elOpen()};SystemJS.import(n._pre+t).then(function(e){c(e)}).catch(function(){c()})}})}},e.go=function(e){window.location.hash="#"+e},e.openUrl=function(e){var t=document.getElementById("el-core-openurl");t||(t=document.createElement("a"),t.setAttribute("id","el-core-openurl"),t.setAttribute("target","_blank"),this.__popDiv.appendChild(t)),t.setAttribute("href",e),t.click()},e.libs=function(e,t){for(var n=[],l=0,a=e;l<a.length;l++){var s=a[l];-1===this._LIBS.indexOf(s)&&n.push(s)}n.length>0?(i.show(),this._libsLoad(0,n,t,document.getElementsByTagName("head")[0])):t()},e._libsLoad=function(e,t,n,l){var a=this;if(this._LIBS.push(t[e]),"css"===t[e].slice(-3)){var s=document.createElement("link");s.rel="stylesheet",s.addEventListener("load",function(){++e,t.length===e?(i.hide(),n()):a._libsLoad(e,t,n,l)}),s.href=t[e]+"?"+this._end,l.insertBefore(s,this.__scriptElement)}else{var o=document.createElement("script");o.addEventListener("load",function(){++e,t.length===e?(i.hide(),n()):a._libsLoad(e,t,n,l)}),o.src=t[e]+"?"+this._end,l.insertBefore(o,this.__scriptElement)}},e.arrayUnique=function(e){for(var t=[],n={},i=0,l=e;i<l.length;i++){var a=l[i];n[a]||(t.push(a),n[a]=1)}return t},e.purifyText=function(e){return e.replace(/\t/g,"").replace(/    /g,"").replace(/\r\n/g,"").replace(/\n/g,"").replace(/\r/g,"")},e.html2escape=function(e){return e.replace(/[<>&"]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]})},e.version="0.0.1",e.__scriptElement=document.querySelector("head > script:last-child"),e.__pages={},e._LIBS=[],e}();e.Core=t;var n=function(){function e(){}return e.get=function(e,t){fetch(e,{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(function(e){t(e)})},e.post=function(e,t,n){var i=new Headers,l=new FormData;for(var a in t)void 0!==t[a]&&l.append(a,t[a]);fetch(e,{method:"POST",headers:i,credentials:"include",body:l}).then(function(e){return e.json()}).then(function(e){n(e)})},e}();e.Http=n;var i=function(){function e(){}return e.show=function(){var e=document.getElementById("el-frame");null!==e&&e.classList.add("el--mask"),document.getElementById("el-mask").classList.add("el--show")},e.hide=function(){var e=document.getElementById("el-frame");null!==e&&e.classList.remove("el--mask"),document.getElementById("el-mask").classList.remove("el--show")},e}();e.Mask=i;var l=function(){function e(){}return e.init=function(){Vue.component("el-header-item",{template:'<div class="el-header-item" @click="$emit(\'click\')"><slot></div>'}),Vue.component("el-logo",{template:'<div class="el-logo"></div>'}),Vue.component("el-table-info",{template:'<table class="el-table-info"><tbody><slot></tbody></table>'}),Vue.component("el-tr",{template:"<tr><slot></tr>"}),Vue.component("el-th",{template:"<th><slot></th>"}),Vue.component("el-td",{template:"<td><slot></td>"}),Vue.component("el-center",{template:'<div class="el-center"><slot></div>'}),Vue.component("el-tip",{template:'<div class="el-tip"><slot></div>'}),Vue.component("el-exp",{template:'<div class="el-exp"><slot></div>'}),Vue.component("el-pictureswall",{props:{value:{default:[]},pre:{default:""},end:{default:""},endPreview:{default:""}},data:function(){return{dialogVisible:!1,dialogImageUrl:""}},methods:{preview:function(e){this.dialogImageUrl=this.pre+e+this.endPreview,this.dialogVisible=!0},click:function(){this.$emit("select")}},template:'<div class="el-pictureswall"><div><ul class="el-upload-list el-upload-list--picture-card"><li v-for="(url, index) of value" tabindex="0" class="el-upload-list__item is-success"><img :src="pre + url + end" alt="" class="el-upload-list__item-thumbnail"><a class="el-upload-list__item-name"><i class="el-icon-document"></i></a><i class="el-icon-close"></i><span class="el-upload-list__item-actions"><span class="el-upload-list__item-preview" @click="preview(url)"><i class="el-icon-zoom-in"></i></span><span class="el-upload-list__item-delete" @click="value.splice(index, 1);$emit(\'input\', value);"><i class="el-icon-delete"></i></span></span></li></ul><div tabindex="0" class="el-upload el-upload--picture-card" @click="click"><i class="el-icon-plus"></i><input name="file" class="el-upload__input" type="file"></div></div><el-dialog :visible.sync="dialogVisible" size="tiny"><img width="100%" :src="dialogImageUrl" alt=""></el-dialog></div>'}),Vue.component("el-phone",{props:{padding:{default:"0"}},template:'<div class="el-phone"><div class="el-phone--inner" :style="{padding: padding}"><slot></div></div>'}),Vue.component("el-phone-line",{template:'<div class="el-phone-line"><template><slot></template><el-button-group><el-button @click="$emit(\'addline\')" type="primary" icon="el-icon-tickets" size="small">加行</el-button><el-button @click="$emit(\'removeline\')" type="primary" icon="el-icon-delete" size="small">删行</el-button><el-button @click="$emit(\'addctr\')" type="primary" icon="el-icon-circle-plus-outline" size="small">加控件</el-button></el-button-group></div>'})},e}();e.Controls=l}(DeskRT||(DeskRT={}));